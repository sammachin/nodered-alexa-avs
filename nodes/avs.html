<script type="text/javascript">
    RED.nodes.registerType('alexa-avs',{
        category: 'function',
        color: '#00CAFF',
        defaults: {
            name: {value:""},
            accessToken : {},
            accessTokenType: {},
            baseURL: {},
            baseURLType: {},
            ffmpeg: {},
            ffmpegType: {},
            output: {},
            outputType: {}
        },
        inputs:1,
        outputs:1,
        icon: "logo_RGB_white.png",
        label: function() {
            return this.name||"AVS";
        },
        oneditprepare: function () {
            var makeTypedInputOpt = function (label, value) {
                return {
                    value: value,
                    label: label,
                    hasValue: false
                }
            }
            $("#node-input-baseURL").typedInput({
                default: "https://alexa.na.gateway.devices.a2z.com",
                types: [
                    makeTypedInputOpt("US", "https://alexa.na.gateway.devices.a2z.com"),
                    makeTypedInputOpt("Europe", "https://alexa.eu.gateway.devices.a2z.com"),
                    makeTypedInputOpt("Asia", "https://alexa.fe.gateway.devices.a2z.com"),
                    , 'flow', 'global', 'str', 'env'
                ],
                typeField: $("#node-input-baseURLType"),
            })
            $("#node-input-accessToken").typedInput({
                default: "msg",
                types: ['msg', 'flow', 'global', 'str', 'env'],
                typeField: $("#node-input-accessTokenType"),
            })
            $("#node-input-ffmpeg").typedInput({
                default: "auto",
                types: [
                    makeTypedInputOpt("Auto", "auto"),
                    
                    ,'str'
                ],
                typeField: $("#node-input-ffmpegType"),
            })
            $("#node-input-output").typedInput({
                default: "none",
                types: [
                    makeTypedInputOpt("None", "none"),
                    makeTypedInputOpt("MP3 22.05KHz", "mp3"),
                    makeTypedInputOpt("WAV 16KHz", "wav"),
                    
                ],
                typeField: $("#node-input-outputType"),
            })
        }
    });
</script>

<script type="text/html" data-template-name="alexa-avs">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row">
        <label for="node-input-baseURL">AVS Endpoint</label>
        <input type="hidden" id="node-input-baseURLType">
        <input type="text" id="node-input-baseURL" style="width:70%;">
    </div>

    <div class="form-row">
        <label for="node-input-accessToken">Access Token</label>
        <input type="hidden" id="node-input-accessTokenType">
        <input type="text" id="node-input-accessToken" style="width:70%;" placeholder="accessToken">
    </div>
    
    <div class="form-row">
        <label for="node-input-output">Convert Audio Output</label>
        <input type="hidden" id="node-input-outputType">
        <input type="text" id="node-input-output" style="width:70%;">
    </div>

    <div class="form-row">
        <label for="node-input-ffmpeg">Path to ffmpeg Token</label>
        <input type="hidden" id="node-input-ffmpegType">
        <input type="text" id="node-input-ffmpeg" style="width:70%;">
    </div>
</script>

<script type="text/html" data-help-name="alexa-avs">
    <p>Send audio to the Alexa Voice Service</p>
</script>